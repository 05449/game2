# 避けゲー 要件定義書

## 1. プロジェクト概要

### 1.1 ゲームタイトル
**「EVADE∞（イベイド・インフィニティ）」**

### 1.2 コンセプト
> 「1秒でも長く生き残れ」

シンプルな操作で障害物を避け続け、できるだけ長く生存するハイスコア型アクションゲーム。
プレイヤーの反射神経と集中力を極限まで試す、中毒性の高いゲーム体験を提供する。

### 1.3 ターゲットユーザー
- カジュアルゲーマー（短時間で遊びたい人）
- スコアアタック好きなハードコアゲーマー
- 反射神経ゲームを好むプレイヤー

### 1.4 プラットフォーム
- **Webブラウザ（PC/スマートフォン対応）**
- HTML5 + JavaScript + Canvas API

---

## 2. ゲームシステム

### 2.1 基本ルール
| 項目 | 内容 |
|------|------|
| 目的 | 障害物を避けて、できるだけ長く生存する |
| 終了条件 | プレイヤーが障害物に衝突 |
| スコア | 生存時間（秒数）+ ボーナスポイント |

### 2.2 プレイヤー操作

#### PC操作
| 入力 | アクション |
|------|-----------|
| マウス移動 | プレイヤー追従 |
| ←→キー / A・Dキー | 左右移動 |
| ↑↓キー / W・Sキー | 上下移動 |
| スペースキー | スローモーション発動（クールダウン制） |

#### スマートフォン操作
| 入力 | アクション |
|------|-----------|
| タッチ＆ドラッグ | プレイヤー追従 |
| ダブルタップ | スローモーション発動 |

### 2.3 プレイヤー仕様
| 項目 | 値 |
|------|-----|
| 形状 | 発光する円形（ネオン風） |
| サイズ | 半径 15px |
| 移動速度 | マウス追従（滑らかな補間） |
| 当たり判定 | 円形（半径の80%） |
| 無敵時間 | ゲーム開始時3秒間 |

---

## 3. 障害物システム

### 3.1 障害物の種類

#### 【基本障害物】
| 名称 | 形状 | 色 | 挙動 |
|------|------|-----|------|
| ノーマル | 円形 | 赤 | 直線移動 |
| ファスト | 小さい円形 | オレンジ | 高速直線移動 |
| ラージ | 大きい円形 | 深紅 | 低速移動 |

#### 【特殊障害物】（時間経過で出現）
| 名称 | 出現時間 | 挙動 |
|------|---------|------|
| ホーミング | 30秒～ | プレイヤーを緩やかに追尾 |
| スプリッター | 45秒～ | 衝突時に3つに分裂 |
| ウェーブ | 60秒～ | 波状に移動 |
| ゴースト | 90秒～ | 点滅しながら移動（見えにくい） |
| レーザー | 120秒～ | 画面を横断するレーザービーム |

### 3.2 難易度スケーリング

```
難易度 = 基準値 × (1 + 経過時間 / 60)
```

| 経過時間 | 出現頻度 | 移動速度 | 特殊障害物 |
|---------|---------|---------|-----------|
| 0-30秒 | 低 | 遅い | なし |
| 30-60秒 | 中 | 普通 | ホーミング |
| 60-120秒 | 高 | 速い | スプリッター、ウェーブ |
| 120秒～ | 極高 | 非常に速い | 全種類 |

### 3.3 障害物スポーンパターン
- **四方向ランダム**: 画面の上下左右からランダムに出現
- **ウェーブ攻撃**: 一定間隔で大量の障害物が波状に出現
- **包囲攻撃**: プレイヤーを囲むように四方から同時出現

---

## 4. パワーアップシステム

### 4.1 一時的パワーアップ（フィールドに出現）
| 名称 | 効果 | 持続時間 | 出現確率 |
|------|------|---------|---------|
| シールド | 1回のみダメージ無効 | 接触まで | 5% |
| スローモーション | 全体を50%減速 | 5秒 | 8% |
| 小型化 | 当たり判定50%縮小 | 8秒 | 10% |
| マグネット | 近くの障害物を弾く | 6秒 | 3% |
| タイムボーナス | スコア+10秒 | 即時 | 15% |

### 4.2 スキルシステム（クールダウン制）
| スキル | 効果 | クールダウン |
|--------|------|-------------|
| 緊急回避 | 0.5秒間完全無敵 | 30秒 |
| スローモーション | 3秒間ゲーム速度50% | 20秒 |

---

## 5. ビジュアル・演出

### 5.1 アートスタイル
- **テーマ**: サイバーパンク / ネオン
- **背景**: 暗い宇宙空間 + グリッドライン
- **パーティクル**: 常時発生する星屑エフェクト

### 5.2 エフェクト一覧
| タイミング | エフェクト |
|-----------|-----------|
| プレイヤー移動 | 残像トレイル（青色発光） |
| 障害物接近 | 画面周辺の赤色警告フラッシュ |
| ニアミス | スローモーション + スコアボーナス表示 |
| パワーアップ取得 | 爆発的なパーティクル |
| 死亡時 | 画面シェイク + 爆発エフェクト |

### 5.3 カラーパレット
| 要素 | カラーコード |
|------|-------------|
| 背景 | #0a0a1a |
| プレイヤー | #00ffff（シアン） |
| 障害物（通常） | #ff3366（ピンク/赤） |
| パワーアップ | #00ff88（エメラルド） |
| UI | #ffffff / #888888 |
| アクセント | #ff00ff（マゼンタ） |

---

## 6. サウンド

### 6.1 BGM
| シーン | 雰囲気 |
|--------|--------|
| タイトル | 落ち着いたシンセウェーブ |
| ゲームプレイ | アップテンポなエレクトロ（BPM増加システム） |
| ゲームオーバー | 静寂 → リザルトBGM |

### 6.2 SE（効果音）
| アクション | サウンド |
|-----------|---------|
| ゲーム開始 | シンセ起動音 |
| 障害物出現 | 低音ビープ |
| ニアミス | 高音ピッチ + 緊張音 |
| パワーアップ取得 | 上昇系シンセ |
| スキル発動 | エコー付きエフェクト |
| 死亡 | 爆発 + 静寂 |
| ハイスコア更新 | ファンファーレ |

---

## 7. UI/UX設計

### 7.1 画面構成

#### タイトル画面
```
┌─────────────────────────────┐
│                             │
│      EVADE∞                 │
│      ─────────              │
│                             │
│      [▶ START]              │
│      [📊 RANKING]           │
│      [⚙ SETTINGS]           │
│                             │
│      BEST: 00:00.00         │
│                             │
└─────────────────────────────┘
```

#### ゲーム画面
```
┌─────────────────────────────┐
│ TIME: 00:45.32    BEST:01:23│
│                             │
│     [スキルゲージ]           │
│                             │
│         ○ ←プレイヤー       │
│                             │
│    ●        ●    ←障害物    │
│         ●                   │
│                             │
│              ★ ←パワーアップ │
└─────────────────────────────┘
```

#### リザルト画面
```
┌─────────────────────────────┐
│                             │
│       GAME OVER             │
│                             │
│    YOUR TIME: 01:45.32      │
│    BEST TIME: 02:30.15      │
│                             │
│    ニアミス: 23回            │
│    取得アイテム: 5個         │
│                             │
│    [🔄 RETRY]  [🏠 TITLE]   │
│                             │
│    [📤 SHARE]               │
│                             │
└─────────────────────────────┘
```

### 7.2 設定項目
| 項目 | オプション |
|------|-----------|
| BGM音量 | 0-100% |
| SE音量 | 0-100% |
| 画面シェイク | ON/OFF |
| パーティクル量 | 低/中/高 |
| 操作方法 | マウス/キーボード |

---

## 8. データ管理

### 8.1 ローカルストレージ保存項目
```json
{
  "bestTime": 0,
  "totalPlayTime": 0,
  "totalDeaths": 0,
  "nearMissCount": 0,
  "settings": {
    "bgmVolume": 80,
    "seVolume": 100,
    "screenShake": true,
    "particleLevel": "high"
  },
  "achievements": []
}
```

### 8.2 実績システム
| 実績名 | 条件 |
|--------|------|
| 初めての一歩 | 初回プレイ |
| 30秒サバイバー | 30秒生存 |
| 1分間の奇跡 | 60秒生存 |
| 鉄壁 | 120秒生存 |
| 伝説 | 180秒生存 |
| ニアミスマスター | 累計100回ニアミス |
| 不死身 | シールド10回取得 |
| 時を止める者 | スキル50回使用 |

---

## 9. 技術仕様

### 9.1 開発環境
| 項目 | 技術 |
|------|------|
| 言語 | HTML5 / CSS3 / JavaScript (ES6+) |
| 描画 | Canvas API |
| 音声 | Web Audio API |
| データ保存 | LocalStorage |
| ビルド | Vite（オプション） |

### 9.2 ファイル構成
```
避けゲー/
├── index.html
├── css/
│   └── style.css
├── js/
│   ├── main.js          # エントリーポイント
│   ├── game.js          # ゲームループ管理
│   ├── player.js        # プレイヤークラス
│   ├── obstacle.js      # 障害物クラス
│   ├── powerup.js       # パワーアップクラス
│   ├── particle.js      # パーティクルシステム
│   ├── audio.js         # サウンド管理
│   ├── ui.js            # UI管理
│   └── storage.js       # データ保存
├── assets/
│   ├── sounds/          # 効果音・BGM
│   └── images/          # 画像素材（あれば）
└── docs/
    └── 要件定義書.md
```

### 9.3 パフォーマンス目標
| 項目 | 目標値 |
|------|--------|
| FPS | 60fps安定 |
| 初期ロード | 2秒以内 |
| メモリ使用量 | 100MB以下 |
| 障害物同時表示 | 最大100個 |

---

## 10. 開発マイルストーン

### Phase 1: 基盤構築（1-2日）
- [x] 要件定義書作成
- [ ] プロジェクト構造作成
- [ ] 基本的なゲームループ実装
- [ ] プレイヤー移動実装

### Phase 2: コア機能（2-3日）
- [ ] 障害物システム実装
- [ ] 当たり判定実装
- [ ] 難易度スケーリング実装
- [ ] スコアシステム実装

### Phase 3: 拡張機能（2-3日）
- [ ] 特殊障害物追加
- [ ] パワーアップシステム実装
- [ ] スキルシステム実装

### Phase 4: 演出強化（2-3日）
- [ ] パーティクルエフェクト
- [ ] 画面エフェクト（シェイク、フラッシュ）
- [ ] サウンド実装

### Phase 5: 仕上げ（1-2日）
- [ ] UI/UXポリッシュ
- [ ] バランス調整
- [ ] バグ修正
- [ ] 最終テスト

---

## 11. 神ゲーポイント

### 🎮 中毒性を生む要素
1. **「あと1秒」の誘惑** - 死因が明確で、改善の余地が常に感じられる
2. **ニアミスボーナス** - ギリギリを狙う高リスク・高リターン
3. **徐々に加速する難易度** - 「まだいける」と思わせる絶妙なカーブ
4. **即リトライ** - 死んでも1秒でリスタート

### ✨ 気持ちよさを生む要素
1. **派手なエフェクト** - ネオンの輝き、パーティクルの飛散
2. **音のフィードバック** - 回避成功時の爽快な効果音
3. **スローモーション** - 危機回避時の演出
4. **スコア表示** - リアルタイムで上がり続ける数字

### 🏆 継続プレイを促す要素
1. **ハイスコア更新の達成感**
2. **実績システムによる目標設定**
3. **ランキング（将来的にオンライン対応も可能）**

---

## 12. 補足

### 将来的な拡張案
- オンラインランキング
- デイリーチャレンジモード
- スキンシステム
- マルチプレイ（協力/対戦）

---

**作成日**: 2026年2月18日  
**バージョン**: 1.0  
**ステータス**: 承認待ち
